(self.webpackChunk_genshin_utils_app_random_event_counter=self.webpackChunk_genshin_utils_app_random_event_counter||[]).push([[992],{62:(e,t)=>{t.z={AppProfile:"app_profile",AppRandomEventCounter:"app_random_event_counter",Shell:"shell"}},992:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AppRandomEventCounter:()=>G});var a=n(834),r=n(927),o=n(819),i=n(619),s=n.n(i);const l=s().div`
  position: relative;
  max-width: 600px;
  margin: auto;
`,c=s().div`
  width: 100%;
  height: 0;
  padding-top: 100%;
`,u=s().circle`
  fill: none;
  stroke: var(--theme-primary);

  transition: stroke-dashoffset 0.2s 0.1s ease, stroke 0.2s ease;

  &[data-count="0"] {
    stroke: var(--theme-bg-sub);
    transition: stroke-dashoffset 0.2s ease, stroke 0.2s 0.1s ease;
  }
`,d=s()(u)`
  stroke: var(--theme-bg-sub);

  &[data-max="max"] {
    stroke: var(--theme-primary);
    transition: stroke 0.1s 0.16s linear;
  }
`,p=s().svg`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  transform: rotate(-90deg);
`,m=s().span`
  position: absolute;
  top: 50%;
  left: 50%;
  font-size: 5em;

  font-weight: bold;
  user-select: none;

  transform: translate(-50%, -50%);
`,f=({count:e,max:t,onClick:n,...a})=>r.createElement(l,{...a,onClick:()=>null==n?void 0:n()},r.createElement(c,null),r.createElement(p,{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},r.createElement(d,{cx:"50",cy:"50",r:"47.5",strokeWidth:"5","data-max":e===t?"max":""}),r.createElement(u,{cx:"50",cy:"50",r:"47.5",pathLength:"1000",strokeWidth:"5",strokeDasharray:"1000",strokeDashoffset:1e3-e/t*1e3,"data-count":e})),r.createElement(m,null,e)),h="award_remains",g=({state:e,onChangeRemains:t})=>{switch(e.type){case"failed":return r.createElement("p",null,"Failed");case"loading":return r.createElement("p",null,"Loading");case"loaded":return r.createElement("div",null,r.createElement(f,{count:e.data.remains,max:10,onClick:()=>t(e.data.remains-1)}),r.createElement("button",{onClick:()=>t(e.data.remains+1)},"+1"))}};var b=n(62);function w(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function v(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function y(e){v(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function k(e,t){v(2,arguments);var n=y(e).getTime(),a=w(t);return new Date(n+a)}function x(e,t){v(2,arguments);var n=w(t);return k(e,6e4*n)}var D=36e5,N=36e5,E={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},C=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,T=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,z=/^([+-])(\d{2})(?::?(\d{2}))?$/;function _(e,t){v(1,arguments);var n=t||{},a=null==n.additionalDigits?2:w(n.additionalDigits);if(2!==a&&1!==a&&0!==a)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var r,o=S(e);if(o.date){var i=M(o.date,a);r=R(i.restDateString,i.year)}if(isNaN(r)||!r)return new Date(NaN);var s,l=r.getTime(),c=0;if(o.time&&(c=O(o.time),isNaN(c)||null===c))return new Date(NaN);if(!o.timezone){var u=new Date(l+c),d=new Date(0);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return s=A(o.timezone),isNaN(s)?new Date(NaN):new Date(l+c+s)}function S(e){var t,n={},a=e.split(E.dateTimeDelimiter);if(a.length>2)return n;if(/:/.test(a[0])?(n.date=null,t=a[0]):(n.date=a[0],t=a[1],E.timeZoneDelimiter.test(n.date)&&(n.date=e.split(E.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var r=E.timezone.exec(t);r?(n.time=t.replace(r[1],""),n.timezone=r[1]):n.time=t}return n}function M(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(n);if(!a)return{year:null};var r=a[1]&&parseInt(a[1]),o=a[2]&&parseInt(a[2]);return{year:null==o?r:100*o,restDateString:e.slice((a[1]||a[2]).length)}}function R(e,t){if(null===t)return null;var n=e.match(C);if(!n)return null;var a=!!n[4],r=j(n[1]),o=j(n[2])-1,i=j(n[3]),s=j(n[4]),l=j(n[5])-1;if(a)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,l)?function(e,t,n){var a=new Date(0);a.setUTCFullYear(e,0,4);var r=7*(t-1)+n+1-(a.getUTCDay()||7);return a.setUTCDate(a.getUTCDate()+r),a}(t,s,l):new Date(NaN);var c=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(I[t]||(F(e)?29:28))}(t,o,i)&&function(e,t){return t>=1&&t<=(F(e)?366:365)}(t,r)?(c.setUTCFullYear(t,o,Math.max(r,i)),c):new Date(NaN)}function j(e){return e?parseInt(e):1}function O(e){var t=e.match(T);if(!t)return null;var n=U(t[1]),a=U(t[2]),r=U(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,a,r)?n*N+6e4*a+1e3*r:NaN}function U(e){return e&&parseFloat(e.replace(",","."))||0}function A(e){if("Z"===e)return 0;var t=e.match(z);if(!t)return 0;var n="+"===t[1]?-1:1,a=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,r)?n*(a*N+6e4*r):NaN}var I=[31,null,31,30,31,30,31,31,30,31,30,31];function F(e){return e%400==0||e%4==0&&e%100}function Z(e){v(1,arguments);var t=y(e);return!isNaN(t)}function $(e,t){for(var n=e<0?"-":"",a=Math.abs(e).toString();a.length<t;)a="0"+a;return n+a}function H(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var n=y(e);if(!Z(n))throw new RangeError("Invalid time value");var a=t||{},r=null==a.format?"extended":String(a.format),o=null==a.representation?"complete":String(a.representation);if("extended"!==r&&"basic"!==r)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==o&&"time"!==o&&"complete"!==o)throw new RangeError("representation must be 'date', 'time', or 'complete'");var i="",s="",l="extended"===r?"-":"",c="extended"===r?":":"";if("time"!==o){var u=$(n.getDate(),2),d=$(n.getMonth()+1,2),p=$(n.getFullYear(),4);i="".concat(p).concat(l).concat(d).concat(l).concat(u)}if("date"!==o){var m=n.getTimezoneOffset();if(0!==m){var f=Math.abs(m),h=$(Math.floor(f/60),2),g=$(f%60,2),b=m<0?"+":"-";s="".concat(b).concat(h,":").concat(g)}else s="Z";var w=$(n.getHours(),2),v=$(n.getMinutes(),2),k=$(n.getSeconds(),2),x=""===i?"":"T",D=[w,v,k].join(c);i="".concat(i).concat(x).concat(D).concat(s)}return i}function Y(e,t){const n=function(e,t){v(2,arguments);var n=w(t);return k(e,n*D)}(function(e,t){v(2,arguments);var n=w(t);return x(e,-n)}(e,e.getTimezoneOffset()),t.tzOffset),a=(t.tzOffset<0?"-":"+")+("00"+t.tzOffset).slice(-2)+":00";return _(H(n.getHours()<4?function(e,t){v(2,arguments);var n=y(e),a=w(t);return isNaN(a)?new Date(NaN):a?(n.setDate(n.getDate()+a),n):n}(n,1):n,{representation:"date"})+"T"+"004".slice(-2)+":00:00"+a)}function L(e){const[t,a]=(0,r.useState)({type:"loading"}),[o,i]=(0,r.useState)(null),s=(0,r.useMemo)((()=>Y(new Date,e.server)),[e.server.tzOffset]),l=(0,r.useCallback)((e=>{o&&o.save(h,e)}),[o]);return(0,r.useEffect)((()=>{const e=s.valueOf()-(new Date).valueOf(),t=setTimeout((()=>{a((e=>{if("loaded"!==e.type)return e;const t={remains:10,loggedAt:H(new Date)};return l(t),{type:"loaded",data:t}}))}),e);return()=>{clearTimeout(t)}}),[s.valueOf(),l]),(0,r.useEffect)((()=>{(async function(e){const t=await function(e){const t=document.createElement("script");return t.src=e,t.type="text/javascript",t.async=!0,new Promise(((n,a)=>{const r=()=>{document.head.removeChild(t)};t.onload=()=>{n(r)},t.onerror=()=>{a(new Error(`Failed to load remote entry: ${e}`)),r()},document.head.appendChild(t)}))}(JSON.parse('{"app_profile":"https://pocka.github.io/genshin-utils/profile/mfre.js","app_random_event_counter":"https://pocka.github.io/genshin-utils/random-event-counter/mfre.js","shell":"https://pocka.github.io/genshin-utils/shell/mfre.js"}')[e]);await n.I("default");const a=window[e];return await a.init(n.S.default),{getModule:(e=".")=>a.get(e).then((e=>e())),unloadRemoteEntry:t}})(b.z.AppProfile).then((async t=>{const{Store:n}=await t.getModule("store");i(new n(e.id,"app_random_event_counter"))}))}),[e]),(0,r.useEffect)((()=>{o&&o.load(h).then((t=>{const n={remains:10,loggedAt:H(new Date)};if(!t)return void a({type:"loaded",data:n});const r=function(e,t){v(2,arguments);var n=y(e),a=y(t);return n.getTime()>a.getTime()}(new Date,Y(_(t.loggedAt),e.server));r&&l(n),a({type:"loaded",data:r?n:t})}))}),[o]),{state:t,nextReset:s,setRemains(e){const t={remains:Math.max(0,Math.min(10,e)),loggedAt:H(new Date)};l(t),a((e=>"loaded"===e.type?{type:"loaded",data:t}:e))}}}const P=({profile:e})=>{const{state:t,setRemains:n}=L(e);return r.createElement(g,{state:t,onChangeRemains:n})};var W,q=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},B=(e,t,n)=>(q(e,t,"read from private field"),n?n.call(e):t.get(e)),J=(e,t,n,a)=>(q(e,t,"write to private field"),a?a.call(e,n):t.set(e,n),n);class G extends HTMLElement{constructor(){super(),W.set(this,void 0),this.attachShadow({mode:"open"})}connectedCallback(){if(!this.isConnected||!this.shadowRoot)return;const e=document.createElement("style");e.textContent=a,J(this,W,document.createElement("div")),this.shadowRoot.appendChild(e),this.shadowRoot.appendChild(B(this,W)),this.profile&&o.render(r.createElement(i.StyleSheetManager,{target:this.shadowRoot},r.createElement(P,{profile:this.profile})),B(this,W))}disconnectedCallback(){B(this,W)&&(o.unmountComponentAtNode(B(this,W)),J(this,W,void 0))}}W=new WeakMap},834:e=>{"use strict";e.exports="/*! destyle.css v2.0.2 | MIT License | https://github.com/nicolas-cusan/destyle.css */*,:after,:before{box-sizing:border-box;border-style:solid;border-width:0}html{line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}body{margin:0}main{display:block}address,blockquote,dl,figure,form,iframe,p,pre,table{margin:0}h1,h2,h3,h4,h5,h6{font-size:inherit;line-height:inherit;font-weight:inherit;margin:0}ol,ul{margin:0;padding:0;list-style:none}dt{font-weight:700}dd{margin-left:0}hr{box-sizing:initial;height:0;overflow:visible;border-top-width:1px;margin:0;clear:both;color:inherit}pre{font-family:monospace,monospace;font-size:inherit}address{font-style:inherit}a{background-color:initial;text-decoration:none;color:inherit}abbr[title]{text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:inherit}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:initial}sub{bottom:-.25em}sup{top:-.5em}embed,iframe,img,object{vertical-align:bottom}button,input,optgroup,select,textarea{-webkit-appearance:none;appearance:none;vertical-align:middle;color:inherit;font:inherit;background:transparent;padding:0;margin:0;outline:0;border-radius:0;text-align:inherit}[type=checkbox]{-webkit-appearance:checkbox;appearance:checkbox}[type=radio]{-webkit-appearance:radio;appearance:radio}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{cursor:pointer;-webkit-appearance:none;appearance:none}[type=button][disabled],[type=reset][disabled],[type=submit][disabled],button[disabled]{cursor:default}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}select::-ms-expand{display:none}fieldset,option{padding:0}fieldset{margin:0;min-width:0}legend{color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:initial}textarea{overflow:auto}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}label[for]{cursor:pointer}details{display:block}summary{display:list-item}[contenteditable]{outline:none}table{border-collapse:collapse;border-spacing:0}caption{text-align:left}td,th{vertical-align:top;padding:0}th{text-align:left;font-weight:700}[hidden],template{display:none}"}}]);